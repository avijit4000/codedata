{
    "asking_question": "What is your Mobile number?",
    "user_answer": "My last name is Avijit Biswas. My date of birth 19 apr 1993"

}



from flask import Flask, jsonify, request
import requests

app = Flask(__name__)

@app.route('/ask_question', methods=['POST'])
def ask_question():
    data = request.get_json()
    user_input = data.get('field_name', '').strip()
    session_id = data.get('session_id', 'user1')
    history = get_session_history(session_id)

    for msg in history.messages:
        if user_input.lower() in msg.content.lower():
            return jsonify({"extracted_answer": msg.content})

    question_template = template_builder.question_ask(user_input)
    prompt = PromptTemplate(input_variables=["user_input"], template=question_template)
    chain = LLMChain(llm=llm, prompt=prompt, verbose=False)
    result = chain.run(user_input=user_input).strip()
    return jsonify({"question": result})


@app.route('/extract_answer', methods=['POST'])
def extract_answer():
    data = request.get_json()
    field_name = data.get('field_name', '')
    user_answer = data.get('user_answer', '')
    session_id = data.get('session_id', 'user1')

    # Step 1: Call /ask_question API internally
    ask_question_url = request.host_url.rstrip('/') + '/ask_question'
    ask_payload = {"field_name": field_name, "session_id": session_id}
    ask_response = requests.post(ask_question_url, json=ask_payload)

    if ask_response.status_code != 200:
        return jsonify({"error": "Failed to get question"}), 500

    question_data = ask_response.json()
    asking_question = question_data.get('question', '')

    # Step 2: Process answer extraction
    history = get_session_history(session_id)
    answer_template = template_builder.question_answer(asking_question, user_answer)
    prompt = ChatPromptTemplate.from_messages([
        ("system", answer_template),
        MessagesPlaceholder(variable_name="history"),
        ("human", "{input}")
    ])
    chain = prompt | llm
    with_memory = RunnableWithMessageHistory(
        chain,
        get_session_history,
        input_messages_key="input",
        history_messages_key="history"
    )
    config = {"configurable": {"session_id": session_id}}

    # Store user answer in memory
    if user_answer:
        with_memory.invoke({"input": user_answer}, config=config)

    # Extract final answer
    response = with_memory.invoke({"input": asking_question}, config=config)
    return jsonify({
        "asking_question": asking_question,
        "extracted_answer": response.content
    })


if __name__ == '__main__':
    app.run(debug=True)



questions1 ={
    "first_name": "What is your first name?",
    "middle_name": "What is your middle name or initial?",
    "last_name": "What is your last name?",
    "date_of_birth": "What is your date of birth? (MM/DD/YYYY)",
    "sex": "What is your sex? (Male/Female/Other)",
    "medicare_number": "What is your Medicare number?",
    "hospital_part_a_effective_date": "What is your Hospital (Part A) effective date? (MM/DD/YYYY)",
    "medical_part_b_effective_date": "What is your Medical (Part B) effective date? (MM/DD/YYYY)",
    "enrolled_in_medicaid": "Are you enrolled in your state's Medicaid program? (Yes/No)",
    "medicaid_number": "What is your Medicaid number?",
    "street_address": "What is your street address?",
    "apartment_suite": "Please provide your apartment or suite number (if applicable).",
    "city": "Which city do you live in?",
    "mailing_same_as_primary": "Is your mailing address the same as your primary address? (Yes/No)",
    "phone_type": "What type of phone do you use? (Mobile/Home/Work)",
    "phone_number": "What is your phone number?",
    "email_address": "What is your email address?",
    "preferred_language": "What is your preferred language?",
    "preferred_format": "What is your preferred communication format? (Email/Mail/Other)",
    "other_prescription_insurance": "Do you have other insurance that will cover your prescription drugs in addition to AARP Medicare Advantage Patriot No Rx CA-MA01 (HMO-POS)? (Yes/No)",
    "insurance_name": "What is the name of your other insurance provider?",
    "insurance_group_id": "What is your insurance group ID number?",
    "insurance_member_id": "What is your insurance member ID number?",
    "rx_bin": "What is your Rx BIN?",
    "enrollment_type_iep": "Are you new to Medicare and enrolling during your Initial Enrollment Period (IEP)? (Yes/No)",
    "enrollment_type_sep": "Are you changing your current coverage during a Special Enrollment Period (SEP)? (Yes/No)",
    "losing_employer_coverage": "Are you losing coverage you had from an employer? (Yes/No)",
    "coverage_loss_month": "In which month are you losing your employer coverage?",
    "coverage_loss_day": "On which day are you losing your employer coverage?",
    "coverage_loss_year": "In which year are you losing your employer coverage?",
    "proposed_effective_date": "What is your proposed effective date? (MM/DD/YYYY)",
    "find_provider": "Would you like to search for your healthcare provider? (Yes/No)",
    "pcp_name": "Enter your Primary Care Provider's (PCP) name.",
    "pcp_location": "Please select your PCP's location.",
    "assign_pcp": "Would you like to assign this Primary Care Provider? (Yes/No)",
    "dollar_amount": "Please confirm the displayed dollar amount.",
    "enrollee_confirmation": "Are you the enrollee listed on this enrollment form? (Yes/No)",
    "authorized_representative": "Are you the authorized representative of the enrollee listed on this enrollment form? (Yes/No)",
    "agreement": "Do you agree to the terms and conditions? (Agree/Disagree)",
    "submit_application": "Would you like to submit your application? (Yes/No)"
}



no, i want this waywrite a message about task 
1. chatbot application converting convectional
2. current time question creation with the filed name 
3. asking question user-friendly way
4. curation of user input real time with the application

write it with in 4 sentencess. make this formaly




Develop a chatbot application that converts conventional interactions into conversational form.

Implement current-time-based question creation using specific field names.

Design the chatbot to ask questions in a user-friendly and engaging manner.

Enable real-time curation and processing of user inputs within the application.




http://mr-portals-monitoring.optum.com/acquisition/overview/ampKeyMetricsView





[{'source': 'current_year_ytd', 'priority_1_2_count': 4, 'priority_3_4_5_count': 92, 'problem_count': 5, 'total_adtm': 0}, {'source': 'previous_year_ytd', 'priority_1_2_count': 9, 'priority_3_4_5_count': 100, 'problem_count': 11}, {'source': 'previous_year', 'priority_1_2_count': 10, 'priority_3_4_5_count': 115, 'problem_count': 12}, {'source': 'year_before_previous_year', 'priority_1_2_count': 12, 'priority_3_4_5_count': 345, 'problem_count': 87}, {'source': 'January 2024', 'priority_1_2_count': 2, 'priority_3_4_5_count': 12, 'problem_count': 5}, {'source': 'February 2024', 'priority_1_2_count': 0, 'priority_3_4_5_count': 8, 'problem_count': 0}, {'source': 'March 2024', 'priority_1_2_count': 0, 'priority_3_4_5_count': 7, 'problem_count': 0}, {'source': 'April 2024', 'priority_1_2_count': 1, 'priority_3_4_5_count': 8, 'problem_count': 1}, {'source': 'May 2024', 'priority_1_2_count': 0, 'priority_3_4_5_count': 5, 'problem_count': 1}, {'source': 'June 2024', 'priority_1_2_count': 1, 'priority_3_4_5_count': 8, 'problem_count': 0}, {'source': 'July 2024', 'priority_1_2_count': 1, 'priority_3_4_5_count': 16, 'problem_count': 1}, {'source': 'August 2024', 'priority_1_2_count': 3, 'priority_3_4_5_count': 13, 'problem_count': 1}, {'source': 'September 2024', 'priority_1_2_count': 0, 'priority_3_4_5_count': 8, 'problem_count': 0}, {'source': 'October 2024', 'priority_1_2_count': 0, 'priority_3_4_5_count': 21, 'problem_count': 0}, {'source': 'November 2024', 'priority_1_2_count': 3, 'priority_3_4_5_count': 15, 'problem_count': 3}, {'source': 'December 2024', 'priority_1_2_count': 0, 'priority_3_4_5_count': 12, 'problem_count': 0}, {'source': 'January 2025', 'priority_1_2_count': 0, 'priority_3_4_5_count': 10, 'problem_count': 0}, {'source': 'February 2025', 'priority_1_2_count': 0, 'priority_3_4_5_count': 13, 'problem_count': 0}, {'source': 'March 2025', 'priority_1_2_count': 0, 'priority_3_4_5_count': 6, 'problem_count': 0}, {'source': 'April 2025', 'priority_1_2_count': 0, 'priority_3_4_5_count': 6, 'problem_count': 0}, {'source': 'May 2025', 'priority_1_2_count': 0, 'priority_3_4_5_count': 1, 'problem_count': 0}, {'source': 'June 2025', 'priority_1_2_count': 0, 'priority_3_4_5_count': 3, 'problem_count': 0}, {'source': 'July 2025', 'priority_1_2_count': 0, 'priority_3_4_5_count': 4, 'problem_count': 0}, {'source': 'August 2025', 'priority_1_2_count': 1, 'priority_3_4_5_count': 10, 'problem_count': 1}, {'source': 'September 2025', 'priority_1_2_count': 1, 'priority_3_4_5_count': 11, 'problem_count': 1}, {'source': 'October 2025', 'priority_1_2_count': 2, 'priority_3_4_5_count': 22, 'problem_count': 3}]




What is the total problem count for the current year YTD?â€

ðŸ“Š â€œShow all data for â€˜previous_year_ytdâ€™.â€

ðŸ”¢ â€œWhich month in 2024 had the highest priority_3_4_5_count?â€

ðŸ“† â€œList all months where problem_count > 2.â€

ðŸ“ˆ â€œCompare priority_1_2_count between current_year_ytd and previous_year_ytd.â€

ðŸ“‰ â€œWhat is the trend of priority_3_4_5_count from January 2024 to October 2025?â€

âš™ï¸ â€œCalculate the total number of problems reported in 2024.â€

ðŸ“‹ â€œGive me all records where total_adtm is present.â€

ðŸ” â€œFind months in 2025 where priority_1_2_count > 0.â€

ðŸ“‘ â€œSummarize total counts for each year (priority_1_2, priority_3_4_5, and problem_count).â€





https://github.com/modelcontextprotocol/python-sdk/blob/main/src/mcp/client/sse.py







{'UMS': [{'date': '2025-10-04', 'latency_50': 1.06, 'latency_90': 2.44, 'js_error_rate': '0.3%'}, {'date': '2025-10-05', 'latency_50': 1.06, 'latency_90': 2.42, 'js_error_rate': '0.32%'}, {'date': '2025-10-06', 'latency_50': 1.04, 'latency_90': 2.35, 'js_error_rate': '0.39%'}, {'date': '2025-10-07', 'latency_50': 1.07, 'latency_90': 2.52, 'js_error_rate': '0.41%'}, {'date': '2025-10-08', 'latency_50': 1.05, 'latency_90': 2.61, 'js_error_rate': '0.35%'}, {'date': '2025-10-09', 'latency_50': 1.06, 'latency_90': 2.58, 'js_error_rate': '0.22%'}, {'date': '2025-10-10', 'latency_50': 1.09, 'latency_90': 2.65, 'js_error_rate': '0.13%'}, {'date': '2025-10-11', 'latency_50': 1.12, 'latency_90': 2.66, 'js_error_rate': '0.15%'}, {'date': '2025-10-12', 'latency_50': 1.11, 'latency_90': 2.65, 'js_error_rate': '0.14%'}, {'date': '2025-10-13', 'latency_50': 1.05, 'latency_90': 2.59, 'js_error_rate': '0.13%'}, {'date': '2025-10-14', 'latency_50': 1.07, 'latency_90': 2.71, 'js_error_rate': '0.15%'}, {'date': '2025-10-15', 'latency_50': 1.07, 'latency_90': 2.68, 'js_error_rate': '0.17%'}, {'date': '2025-10-16', 'latency_50': 1.06, 'latency_90': 2.67, 'js_error_rate': '0.17%'}, {'date': '2025-10-17', 'latency_50': 1.07, 'latency_90': 2.7, 'js_error_rate': '0.15%'}, {'date': '2025-10-18', 'latency_50': 1.1, 'latency_90': 2.76, 'js_error_rate': '0.19%'}, {'date': '2025-10-19', 'latency_50': 1.15, 'latency_90': 2.93, 'js_error_rate': '0.15%'}, {'date': '2025-10-20', 'latency_50': 1.12, 'latency_90': 2.83, 'js_error_rate': '0.17%'}, {'date': '2025-10-21', 'latency_50': 1.09, 'latency_90': 2.84, 'js_error_rate': '0.21%'}, {'date': '2025-10-22', 'latency_50': 1.11, 'latency_90': 2.83, 'js_error_rate': '0.36%'}, {'date': '2025-10-23', 'latency_50': 1.14, 'latency_90': 2.85, 'js_error_rate': '0.31%'}, {'date': '2025-10-24', 'latency_50': 1.18, 'latency_90': 2.82, 'js_error_rate': '0.32%'}, {'date': '2025-10-25', 'latency_50': 1.27, 'latency_90': 3.0, 'js_error_rate': '0.35%'}, {'date': '2025-10-26', 'latency_50': 1.29, 'latency_90': 3.06, 'js_error_rate': '0.34%'}, {'date': '2025-10-27', 'latency_50': 1.15, 'latency_90': 2.9, 'js_error_rate': '0.26%'}, {'date': '2025-10-28', 'latency_50': 1.17, 'latency_90': 2.89, 'js_error_rate': '0.23%'}, {'date': '2025-10-29', 'latency_50': 1.31, 'latency_90': 3.56, 'js_error_rate': '0.2%'}, {'date': '2025-10-30', 'latency_50': 1.18, 'latency_90': 2.87, 'js_error_rate': '0.18%'}, {'date': '2025-10-31', 'latency_50': 1.18, 'latency_90': 2.83, 'js_error_rate': '0.19%'}, {'date': '2025-11-01', 'latency_50': 1.26, 'latency_90': 2.89, 'js_error_rate': '0.18%'}, {'date': '2025-11-02', 'latency_50': 1.32, 'latency_90': 2.97, 'js_error_rate': '0.16%'}, {'date': '2025-11-03', 'latency_50': 1.15, 'latency_90': 2.8, 'js_error_rate': '0.15%'}, {'date': '2025-11-04', 'latency_50': 1.21, 'latency_90': 2.87, 'js_error_rate': '0.15%'}, {'date': '2025-11-05', 'latency_50': 1.21, 'latency_90': 2.98, 'js_error_rate': '0.15%'}, {'date': '2025-11-06', 'latency_50': 1.19, 'latency_90': 2.89, 'js_error_rate': '0.15%'}, {'date': '2025-11-07', 'latency_50': 1.22, 'latency_90': 2.9, 'js_error_rate': '0.15%'}, {'date': '2025-11-08', 'latency_50': 1.29, 'latency_90': 2.98, 'js_error_rate': '0.14%'}, {'date': '2025-11-09', 'latency_50': 1.32, 'latency_90': 3.08, 'js_error_rate': '0.13%'}, {'date': '2025-11-10', 'latency_50': 1.19, 'latency_90': 3.0, 'js_error_rate': '0.15%'}, {'date': '2025-11-11', 'latency_50': 1.2, 'latency_90': 2.94, 'js_error_rate': '0.17%'}, {'date': '2025-11-12', 'latency_50': 1.16, 'latency_90': 2.86, 'js_error_rate': '0.14%'}, {'date': '2025-11-13', 'latency_50': 1.13, 'latency_90': 2.8, 'js_error_rate': '0.15%'}, {'date': '2025-11-14', 'latency_50': 1.12, 'latency_90': 2.72, 'js_error_rate': '0.15%'}, {'date': '2025-11-15', 'latency_50': 1.14, 'latency_90': 2.69, 'js_error_rate': '0.15%'}, {'date': '2025-11-16', 'latency_50': 1.11, 'latency_90': 2.61, 'js_error_rate': '0.15%'}, {'date': '2025-11-17', 'latency_50': 1.1, 'latency_90': 2.56, 'js_error_rate': '1.22%'}, {'date': '2025-11-18', 'latency_50': 1.12, 'latency_90': 2.69, 'js_error_rate': '3.15%'}, {'date': '2025-11-19', 'latency_50': 1.08, 'latency_90': 2.62, 'js_error_rate': '3.02%'}, {'date': '2025-11-20', 'latency_50': 1.08, 'latency_90': 2.56, 'js_error_rate': '2.37%'}, {'date': '2025-11-21', 'latency_50': 1.11, 'latency_90': 2.62, 'js_error_rate': '1.38%'}, {'date': '2025-11-22', 'latency_50': 1.14, 'latency_90': 2.74, 'js_error_rate': '1.32%'}, {'date': '2025-11-23', 'latency_50': 1.14, 'latency_90': 2.69, 'js_error_rate': '1.29%'}, {'date': '2025-11-24', 'latency_50': 1.11, 'latency_90': 2.64, 'js_error_rate': '1.31%'}, {'date': '2025-11-25', 'latency_50': 1.13, 'latency_90': 2.72, 'js_error_rate': '1.11%'}, {'date': '2025-11-26', 'latency_50': 1.13, 'latency_90': 2.69, 'js_error_rate': '0.34%'}, {'date': '2025-11-27', 'latency_50': 1.21, 'latency_90': 2.91, 'js_error_rate': '0.27%'}, {'date': '2025-11-28', 'latency_50': 1.16, 'latency_90': 2.84, 'js_error_rate': '0.17%'}, {'date': '2025-11-29', 'latency_50': 1.17, 'latency_90': 2.8, 'js_error_rate': '0.11%'}, {'date': '2025-11-30', 'latency_50': 1.14, 'latency_90': 2.72, 'js_error_rate': '0.12%'}, {'date': '2025-12-01', 'latency_50': 1.08, 'latency_90': 2.66, 'js_error_rate': '0.13%'}, {'date': '2025-12-02', 'latency_50': 1.09, 'latency_90': 2.74, 'js_error_rate': '0.16%'}, {'date': '2025-12-03', 'latency_50': 1.27, 'latency_90': 3.1, 'js_error_rate': '0.23%'}], 'AMP': [{'date': '2025-10-04', 'latency_50': 0.8, 'latency_90': 2.21, 'js_error_rate': '0.78%'}, {'date': '2025-10-05', 'latency_50': 0.78, 'latency_90': 2.15, 'js_error_rate': '0.76%'}, {'date': '2025-10-06', 'latency_50': 0.78, 'latency_90': 2.29, 'js_error_rate': '0.77%'}, {'date': '2025-10-07', 'latency_50': 0.76, 'latency_90': 2.34, 'js_error_rate': '0.91%'}, {'date': '2025-10-08', 'latency_50': 0.75, 'latency_90': 2.39, 'js_error_rate': '0.87%'}, {'date': '2025-10-09', 'latency_50': 0.8, 'latency_90': 2.51, 'js_error_rate': '0.79%'}, {'date': '2025-10-10', 'latency_50': 0.93, 'latency_90': 2.52, 'js_error_rate': '0.43%'}, {'date': '2025-10-11', 'latency_50': 0.85, 'latency_90': 2.44, 'js_error_rate': '0.4%'}, {'date': '2025-10-12', 'latency_50': 0.87, 'latency_90': 2.65, 'js_error_rate': '0.48%'}, {'date': '2025-10-13', 'latency_50': 0.85, 'latency_90': 2.53, 'js_error_rate': '0.46%'}, {'date': '2025-10-14', 'latency_50': 0.83, 'latency_90': 2.59, 'js_error_rate': '0.47%'}, {'date': '2025-10-15', 'latency_50': 0.86, 'latency_90': 2.68, 'js_error_rate': '0.48%'}, {'date': '2025-10-16', 'latency_50': 0.83, 'latency_90': 2.57, 'js_error_rate': '0.53%'}, {'date': '2025-10-17', 'latency_50': 0.87, 'latency_90': 2.72, 'js_error_rate': '0.54%'}, {'date': '2025-10-18', 'latency_50': 0.86, 'latency_90': 2.87, 'js_error_rate': '0.55%'}, {'date': '2025-10-19', 'latency_50': 0.91, 'latency_90': 2.78, 'js_error_rate': '0.55%'}, {'date': '2025-10-20', 'latency_50': 0.82, 'latency_90': 2.68, 'js_error_rate': '0.56%'}, {'date': '2025-10-21', 'latency_50': 0.83, 'latency_90': 2.74, 'js_error_rate': '0.52%'}, {'date': '2025-10-22', 'latency_50': 0.82, 'latency_90': 2.66, 'js_error_rate': '0.76%'}, {'date': '2025-10-23', 'latency_50': 0.79, 'latency_90': 2.45, 'js_error_rate': '0.69%'}, {'date': '2025-10-24', 'latency_50': 0.89, 'latency_90': 2.75, 'js_error_rate': '0.75%'}, {'date': '2025-10-25', 'latency_50': 0.89, 'latency_90': 2.88, 'js_error_rate': '0.79%'}, {'date': '2025-10-26', 'latency_50': 0.88, 'latency_90': 2.72, 'js_error_rate': '0.83%'}, {'date': '2025-10-27', 'latency_50': 0.88, 'latency_90': 2.77, 'js_error_rate': '0.58%'}, {'date': '2025-10-28', 'latency_50': 1.01, 'latency_90': 2.66, 'js_error_rate': '0.54%'}, {'date': '2025-10-29', 'latency_50': 1.01, 'latency_90': 2.82, 'js_error_rate': '0.38%'}, {'date': '2025-10-30', 'latency_50': 1.19, 'latency_90': 2.55, 'js_error_rate': '0.45%'}, {'date': '2025-10-31', 'latency_50': 1.39, 'latency_90': 2.62, 'js_error_rate': '0.53%'}, {'date': '2025-11-01', 'latency_50': 1.44, 'latency_90': 2.6, 'js_error_rate': '0.5%'}, {'date': '2025-11-02', 'latency_50': 1.49, 'latency_90': 2.53, 'js_error_rate': '0.55%'}, {'date': '2025-11-03', 'latency_50': 1.27, 'latency_90': 2.59, 'js_error_rate': '0.44%'}, {'date': '2025-11-04', 'latency_50': 1.38, 'latency_90': 2.65, 'js_error_rate': '0.43%'}, {'date': '2025-11-05', 'latency_50': 1.31, 'latency_90': 2.68, 'js_error_rate': '0.39%'}, {'date': '2025-11-06', 'latency_50': 1.39, 'latency_90': 2.74, 'js_error_rate': '0.42%'}, {'date': '2025-11-07', 'latency_50': 1.54, 'latency_90': 2.68, 'js_error_rate': '0.39%'}, {'date': '2025-11-08', 'latency_50': 1.81, 'latency_90': 2.77, 'js_error_rate': '0.52%'}, {'date': '2025-11-09', 'latency_50': 1.82, 'latency_90': 2.76, 'js_error_rate': '0.43%'}, {'date': '2025-11-10', 'latency_50': 1.4, 'latency_90': 2.86, 'js_error_rate': '0.4%'}, {'date': '2025-11-11', 'latency_50': 1.37, 'latency_90': 2.9, 'js_error_rate': '0.37%'}, {'date': '2025-11-12', 'latency_50': 0.97, 'latency_90': 2.77, 'js_error_rate': '0.37%'}, {'date': '2025-11-13', 'latency_50': 0.83, 'latency_90': 2.57, 'js_error_rate': '0.45%'}, {'date': '2025-11-14', 'latency_50': 0.83, 'latency_90': 2.54, 'js_error_rate': '0.41%'}, {'date': '2025-11-15', 'latency_50': 0.89, 'latency_90': 2.64, 'js_error_rate': '0.47%'}, {'date': '2025-11-16', 'latency_50': 0.84, 'latency_90': 2.55, 'js_error_rate': '0.5%'}, {'date': '2025-11-17', 'latency_50': 0.83, 'latency_90': 2.46, 'js_error_rate': '2.34%'}, {'date': '2025-11-18', 'latency_50': 0.84, 'latency_90': 2.58, 'js_error_rate': '5.16%'}, {'date': '2025-11-19', 'latency_50': 0.81, 'latency_90': 2.45, 'js_error_rate': '5.29%'}, {'date': '2025-11-20', 'latency_50': 0.81, 'latency_90': 2.45, 'js_error_rate': '4.18%'}, {'date': '2025-11-21', 'latency_50': 0.86, 'latency_90': 2.64, 'js_error_rate': '2.7%'}, {'date': '2025-11-22', 'latency_50': 0.86, 'latency_90': 2.61, 'js_error_rate': '2.64%'}, {'date': '2025-11-23', 'latency_50': 0.87, 'latency_90': 2.64, 'js_error_rate': '2.84%'}, {'date': '2025-11-24', 'latency_50': 0.81, 'latency_90': 2.44, 'js_error_rate': '2.8%'}, {'date': '2025-11-25', 'latency_50': 0.83, 'latency_90': 2.56, 'js_error_rate': '2.1%'}, {'date': '2025-11-26', 'latency_50': 0.82, 'latency_90': 2.44, 'js_error_rate': '0.35%'}, {'date': '2025-11-27', 'latency_50': 0.85, 'latency_90': 2.58, 'js_error_rate': '0.45%'}, {'date': '2025-11-28', 'latency_50': 0.83, 'latency_90': 2.56, 'js_error_rate': '0.34%'}, {'date': '2025-11-29', 'latency_50': 0.83, 'latency_90': 2.62, 'js_error_rate': '0.4%'}, {'date': '2025-11-30', 'latency_50': 0.83, 'latency_90': 2.53, 'js_error_rate': '0.34%'}, {'date': '2025-12-01', 'latency_50': 0.81, 'latency_90': 2.41, 'js_error_rate': '0.32%'}, {'date': '2025-12-02', 'latency_50': 0.82, 'latency_90': 2.52, 'js_error_rate': '0.35%'}, {'date': '2025-12-03', 'latency_50': 0.73, 'latency_90': 2.36, 'js_error_rate': '0.33%'}], 'All': [{'latency_50': 0.93, 'latency_90': 2.33, 'js_error_rate': '0.54%', 'date': '2025-10-04'}, {'latency_50': 0.92, 'latency_90': 2.29, 'js_error_rate': '0.54%', 'date': '2025-10-05'}, {'latency_50': 0.91, 'latency_90': 2.32, 'js_error_rate': '0.58%', 'date': '2025-10-06'}, {'latency_50': 0.92, 'latency_90': 2.43, 'js_error_rate': '0.66%', 'date': '2025-10-07'}, {'latency_50': 0.9, 'latency_90': 2.5, 'js_error_rate': '0.61%', 'date': '2025-10-08'}, {'latency_50': 0.93, 'latency_90': 2.54, 'js_error_rate': '0.51%', 'date': '2025-10-09'}, {'latency_50': 1.01, 'latency_90': 2.58, 'js_error_rate': '0.28%', 'date': '2025-10-10'}, {'latency_50': 0.99, 'latency_90': 2.55, 'js_error_rate': '0.28%', 'date': '2025-10-11'}, {'latency_50': 0.99, 'latency_90': 2.65, 'js_error_rate': '0.31%', 'date': '2025-10-12'}, {'latency_50': 0.95, 'latency_90': 2.56, 'js_error_rate': '0.3%', 'date': '2025-10-13'}, {'latency_50': 0.95, 'latency_90': 2.65, 'js_error_rate': '0.31%', 'date': '2025-10-14'}, {'latency_50': 0.97, 'latency_90': 2.68, 'js_error_rate': '0.33%', 'date': '2025-10-15'}, {'latency_50': 0.95, 'latency_90': 2.62, 'js_error_rate': '0.35%', 'date': '2025-10-16'}, {'latency_50': 0.97, 'latency_90': 2.71, 'js_error_rate': '0.35%', 'date': '2025-10-17'}, {'latency_50': 0.98, 'latency_90': 2.81, 'js_error_rate': '0.37%', 'date': '2025-10-18'}, {'latency_50': 1.03, 'latency_90': 2.85, 'js_error_rate': '0.35%', 'date': '2025-10-19'}, {'latency_50': 0.97, 'latency_90': 2.75, 'js_error_rate': '0.37%', 'date': '2025-10-20'}, {'latency_50': 0.96, 'latency_90': 2.79, 'js_error_rate': '0.36%', 'date': '2025-10-21'}, {'latency_50': 0.97, 'latency_90': 2.75, 'js_error_rate': '0.56%', 'date': '2025-10-22'}, {'latency_50': 0.96, 'latency_90': 2.65, 'js_error_rate': '0.5%', 'date': '2025-10-23'}, {'latency_50': 1.03, 'latency_90': 2.79, 'js_error_rate': '0.54%', 'date': '2025-10-24'}, {'latency_50': 1.08, 'latency_90': 2.94, 'js_error_rate': '0.57%', 'date': '2025-10-25'}, {'latency_50': 1.08, 'latency_90': 2.89, 'js_error_rate': '0.58%', 'date': '2025-10-26'}, {'latency_50': 1.01, 'latency_90': 2.83, 'js_error_rate': '0.42%', 'date': '2025-10-27'}, {'latency_50': 1.09, 'latency_90': 2.78, 'js_error_rate': '0.39%', 'date': '2025-10-28'}, {'latency_50': 1.16, 'latency_90': 3.19, 'js_error_rate': '0.29%', 'date': '2025-10-29'}, {'latency_50': 1.19, 'latency_90': 2.71, 'js_error_rate': '0.32%', 'date': '2025-10-30'}, {'latency_50': 1.28, 'latency_90': 2.73, 'js_error_rate': '0.36%', 'date': '2025-10-31'}, {'latency_50': 1.35, 'latency_90': 2.75, 'js_error_rate': '0.34%', 'date': '2025-11-01'}, {'latency_50': 1.41, 'latency_90': 2.75, 'js_error_rate': '0.36%', 'date': '2025-11-02'}, {'latency_50': 1.21, 'latency_90': 2.69, 'js_error_rate': '0.29%', 'date': '2025-11-03'}, {'latency_50': 1.29, 'latency_90': 2.76, 'js_error_rate': '0.29%', 'date': '2025-11-04'}, {'latency_50': 1.26, 'latency_90': 2.83, 'js_error_rate': '0.27%', 'date': '2025-11-05'}, {'latency_50': 1.29, 'latency_90': 2.82, 'js_error_rate': '0.28%', 'date': '2025-11-06'}, {'latency_50': 1.38, 'latency_90': 2.79, 'js_error_rate': '0.27%', 'date': '2025-11-07'}, {'latency_50': 1.55, 'latency_90': 2.88, 'js_error_rate': '0.33%', 'date': '2025-11-08'}, {'latency_50': 1.57, 'latency_90': 2.92, 'js_error_rate': '0.28%', 'date': '2025-11-09'}, {'latency_50': 1.29, 'latency_90': 2.93, 'js_error_rate': '0.28%', 'date': '2025-11-10'}, {'latency_50': 1.29, 'latency_90': 2.92, 'js_error_rate': '0.27%', 'date': '2025-11-11'}, {'latency_50': 1.06, 'latency_90': 2.81, 'js_error_rate': '0.26%', 'date': '2025-11-12'}, {'latency_50': 0.98, 'latency_90': 2.68, 'js_error_rate': '0.3%', 'date': '2025-11-13'}, {'latency_50': 0.98, 'latency_90': 2.63, 'js_error_rate': '0.28%', 'date': '2025-11-14'}, {'latency_50': 1.01, 'latency_90': 2.67, 'js_error_rate': '0.31%', 'date': '2025-11-15'}, {'latency_50': 0.98, 'latency_90': 2.58, 'js_error_rate': '0.33%', 'date': '2025-11-16'}, {'latency_50': 0.97, 'latency_90': 2.51, 'js_error_rate': '1.78%', 'date': '2025-11-17'}, {'latency_50': 0.98, 'latency_90': 2.63, 'js_error_rate': '4.16%', 'date': '2025-11-18'}, {'latency_50': 0.95, 'latency_90': 2.54, 'js_error_rate': '4.16%', 'date': '2025-11-19'}, {'latency_50': 0.95, 'latency_90': 2.5, 'js_error_rate': '3.27%', 'date': '2025-11-20'}, {'latency_50': 0.99, 'latency_90': 2.63, 'js_error_rate': '2.04%', 'date': '2025-11-21'}, {'latency_50': 1.0, 'latency_90': 2.67, 'js_error_rate': '1.98%', 'date': '2025-11-22'}, {'latency_50': 1.0, 'latency_90': 2.67, 'js_error_rate': '2.06%', 'date': '2025-11-23'}, {'latency_50': 0.96, 'latency_90': 2.54, 'js_error_rate': '2.05%', 'date': '2025-11-24'}, {'latency_50': 0.98, 'latency_90': 2.64, 'js_error_rate': '1.6%', 'date': '2025-11-25'}, {'latency_50': 0.97, 'latency_90': 2.56, 'js_error_rate': '0.34%', 'date': '2025-11-26'}, {'latency_50': 1.03, 'latency_90': 2.75, 'js_error_rate': '0.36%', 'date': '2025-11-27'}, {'latency_50': 0.99, 'latency_90': 2.7, 'js_error_rate': '0.26%', 'date': '2025-11-28'}, {'latency_50': 1.0, 'latency_90': 2.71, 'js_error_rate': '0.26%', 'date': '2025-11-29'}, {'latency_50': 0.98, 'latency_90': 2.62, 'js_error_rate': '0.23%', 'date': '2025-11-30'}, {'latency_50': 0.95, 'latency_90': 2.54, 'js_error_rate': '0.23%', 'date': '2025-12-01'}, {'latency_50': 0.96, 'latency_90': 2.63, 'js_error_rate': '0.26%', 'date': '2025-12-02'}, {'latency_50': 1.0, 'latency_90': 2.73, 'js_error_rate': '0.28%', 'date': '2025-12-03'}]}










(venv) C:\Newfolder\test_mcp>python -m client
unhandled exception during asyncio.run() shutdown
task: <Task finished name='Task-2' coro=<load_mcp_tools() done, defined at C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py:309> exception=UnboundLocalError("cannot access local variable 'tools' where it is not associated with a value")>
  + Exception Group Traceback (most recent call last):
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 194, in run
  |     return runner.run(main)
  |            ^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 118, in run
  |     return self._loop.run_until_complete(task)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
  |     return future.result()
  |            ^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\test_mcp\client.py", line 329, in main
  |     tools = await client.get_tools()
  |             ^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\client.py", line 187, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 348, in load_mcp_tools
  |     async with create_session(
  |                ^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 418, in create_session
  |     async with _create_stdio_session(**params) as session:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 231, in _create_stdio_session
  |     stdio_client(server_params) as (read, write),
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 183, in stdio_client
  |     anyio.create_task_group() as tg,
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 232, in _create_stdio_session
    |     ClientSession(read, write, **(session_kwargs or {})) as session,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 220, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 234, in _create_stdio_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 419, in create_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 351, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\session.py", line 153, in initialize
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 288, in send_request
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
      +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 365, in load_mcp_tools
    for tool in tools
                ^^^^^
UnboundLocalError: cannot access local variable 'tools' where it is not associated with a value   
unhandled exception during asyncio.run() shutdown
task: <Task finished name='Task-3' coro=<load_mcp_tools() done, defined at C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py:309> exception=UnboundLocalError("cannot access local variable 'tools' where it is not associated with a value")>
  + Exception Group Traceback (most recent call last):
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 194, in run
  |     return runner.run(main)
  |            ^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 118, in run
  |     return self._loop.run_until_complete(task)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
  |     return future.result()
  |            ^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\test_mcp\client.py", line 329, in main
  |     tools = await client.get_tools()
  |             ^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\client.py", line 187, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 348, in load_mcp_tools
  |     async with create_session(
  |                ^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 418, in create_session
  |     async with _create_stdio_session(**params) as session:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 231, in _create_stdio_session
  |     stdio_client(server_params) as (read, write),
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 183, in stdio_client
  |     anyio.create_task_group() as tg,
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 232, in _create_stdio_session
    |     ClientSession(read, write, **(session_kwargs or {})) as session,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 220, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 234, in _create_stdio_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 419, in create_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 351, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\session.py", line 153, in initialize
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 288, in send_request
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
      +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 365, in load_mcp_tools
    for tool in tools
                ^^^^^
UnboundLocalError: cannot access local variable 'tools' where it is not associated with a value   
  + Exception Group Traceback (most recent call last):
  |   File "<frozen runpy>", line 198, in _run_module_as_main
  |   File "<frozen runpy>", line 88, in _run_code
  |   File "C:\Newfolder\test_mcp\client.py", line 357, in <module>
  |     asyncio.run(main())
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 194, in run
  |     return runner.run(main)
  |            ^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 118, in run
  |     return self._loop.run_until_complete(task)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
  |     return future.result()
  |            ^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\test_mcp\client.py", line 329, in main
  |     tools = await client.get_tools()
  |             ^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\client.py", line 187, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 348, in load_mcp_tools
  |     async with create_session(
  |                ^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 418, in create_session
  |     async with _create_stdio_session(**params) as session:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 231, in _create_stdio_session
  |     stdio_client(server_params) as (read, write),
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 183, in stdio_client
  |     anyio.create_task_group() as tg,
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 232, in _create_stdio_session
    |     ClientSession(read, write, **(session_kwargs or {})) as session,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 220, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 234, in _c      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 419, in create_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 351, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\session.py", line 153, in initialize     
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 288, in send_request   
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
      +------------------------------------

(venv) C:\Newfolder\test_mcp>python -m client
unhandled exception during asyncio.run() shutdown
task: <Task finished name='Task-2' coro=<load_mcp_tools() done, defined at C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py:309> exception=UnboundLocalError("cannot access local variable 'tools' where it is not associated with a value")>
  + Exception Group Traceback (most recent call last):
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 194, in run
  |     return runner.run(main)
  |            ^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 118, in run
  |     return self._loop.run_until_complete(task)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
  |     return future.result()
  |            ^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\test_mcp\client.py", line 329, in main
  |     tools = await client.get_tools()
  |             ^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\client.py", line 187, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 348, in load_mcp_tools
  |     async with create_session(
  |                ^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 418, in create_session
  |     async with _create_stdio_session(**params) as session:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 231, in _create_stdio_session
  |     stdio_client(server_params) as (read, write),
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 183, in stdio_client
  |     anyio.create_task_group() as tg,
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__    
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 232, in _create_stdio_session
    |     ClientSession(read, write, **(session_kwargs or {})) as session,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 220, in __aexit__        
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__  
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 234, in _create_stdio_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 419, in create_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 351, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\session.py", line 153, in initialize     
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 288, in send_request   
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
      +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 365, in load_mcp_tools
    for tool in tools
                ^^^^^
UnboundLocalError: cannot access local variable 'tools' where it is not associated with a value
unhandled exception during asyncio.run() shutdown
task: <Task finished name='Task-5' coro=<load_mcp_tools() done, defined at C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py:309> exception=UnboundLocalError("cannot access local variable 'tools' where it is not associated with a value")>
  + Exception Group Traceback (most recent call last):
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 194, in run
  |     return runner.run(main)
  |            ^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 118, in run
  |     return self._loop.run_until_complete(task)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
  |     return future.result()
  |            ^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\test_mcp\client.py", line 329, in main
  |     tools = await client.get_tools()
  |             ^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\client.py", line 187, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 348, in load_mcp_tools
  |     async with create_session(
  |                ^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 418, in create_session
  |     async with _create_stdio_session(**params) as session:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 231, in _create_stdio_session
  |     stdio_client(server_params) as (read, write),
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 183, in stdio_client
  |     anyio.create_task_group() as tg,
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__    
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 232, in _create_stdio_session
    |     ClientSession(read, write, **(session_kwargs or {})) as session,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 220, in __aexit__        
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__  
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 234, in _create_stdio_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 419, in create_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 351, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\session.py", line 153, in initialize     
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 288, in send_request   
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
      +------------------------------------

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 365, in load_mcp_tools
    for tool in tools
                ^^^^^
UnboundLocalError: cannot access local variable 'tools' where it is not associated with a value
  + Exception Group Traceback (most recent call last):
  |   File "<frozen runpy>", line 198, in _run_module_as_main
  |   File "<frozen runpy>", line 88, in _run_code
  |   File "C:\Newfolder\test_mcp\client.py", line 357, in <module>
  |     asyncio.run(main())
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 194, in run
  |     return runner.run(main)
  |            ^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\runners.py", line 118, in run
  |     return self._loop.run_until_complete(task)
  |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\asyncio\base_events.py", line 687, in run_until_complete
  |     return future.result()
  |            ^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\test_mcp\client.py", line 329, in main
  |     tools = await client.get_tools()
  |             ^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\client.py", line 187, in get_tools
  |     tools_list = await asyncio.gather(*load_mcp_tool_tasks)
  |                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 348, in load_mcp_tools
  |     async with create_session(
  |                ^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 418, in create_session
  |     async with _create_stdio_session(**params) as session:
  |                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 231, in _create_stdio_session
  |     stdio_client(server_params) as (read, write),
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Program Files\Python312\Lib\contextlib.py", line 231, in __aexit__
  |     await self.gen.athrow(value)
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 183, in stdio_client
  |     anyio.create_task_group() as tg,
  |     ^^^^^^^^^^^^^^^^^^^^^^^^^
  |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
  |     raise BaseExceptionGroup(
  | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
  +-+---------------- 1 ----------------
    | Exception Group Traceback (most recent call last):
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\stdio\__init__.py", line 189, in stdio_client
    |     yield read_stream, write_stream
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 232, in _create_stdio_session
    |     ClientSession(read, write, **(session_kwargs or {})) as session,
    |     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 220, in __aexit__
    |     return await self._task_group.__aexit__(exc_type, exc_val, exc_tb)
    |            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
    |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\anyio\_backends\_asyncio.py", line 781, in __aexit__
    |     raise BaseExceptionGroup(
    | ExceptionGroup: unhandled errors in a TaskGroup (1 sub-exception)
    +-+---------------- 1 ----------------
      | Traceback (most recent call last):
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 234, in _create_stdio_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\sessions.py", line 419, in create_session
      |     yield session
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\langchain_mcp_adapters\tools.py", line 351, in load_mcp_tools
      |     await tool_session.initialize()
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\client\session.py", line 153, in initialize
      |     result = await self.send_request(
      |              ^^^^^^^^^^^^^^^^^^^^^^^^
      |   File "C:\Newfolder\MCP-module\venv\Lib\site-packages\mcp\shared\session.py", line 288, in send_request
      |     raise McpError(response_or_error.error)
      | mcp.shared.exceptions.McpError: Connection closed
https://github.com/uhc-tech-medicare-retiree-common/gpd-dm-cohort-recommendation-api/blob/develop/function_app.py



mkdir C:\Users\aviji\AppData\Roaming\npm
cd /d D:\Pyn\Test_work\LLMs\UHG\mcpone\mcpfile
.venv\Scripts\activate
uv run --active mcp dev server/weather.py

npx @modelcontextprotocol/inspector



(venv) C:\Newfolder\mcptwo>npx @modelcontextprotocol/inspector
npm error code ENOTFOUND
npm error syscall getaddrinfo
npm error errno ENOTFOUND
npm error network request to https://registry.npmjs.org/@modelcontextprotocol%2finspector failed, reason: getaddrinfo ENOTFOUND registry.npmjs.org
npm error network This is a problem related to network connectivity.
npm error network In most cases you are behind a proxy or have bad network settings.
npm error network
npm error network If you are behind a proxy, please make sure that the
npm error network 'proxy' config is set properly.  See: 'npm help config'
npm error A complete log of this run can be found in: C:\Users\abiswa51\AppData\Local\npm-cache\_logs\2025-12-30T11_57_08_392Z-debug-0.log

